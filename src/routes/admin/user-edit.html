<header class="fade-in-heading mb-8">
  <div class="flex items-center gap-4">
    <a href="/admin/users" class="text-neutral-400 hover:text-white">Users</a>
    <span class="text-neutral-600">/</span>
    <span class="text-white"><%= it.editUser.name %></span>
  </div>
  <h1 class="mt-4 text-2xl font-bold text-white">Edit User</h1>
</header>

<div class="fade-in animation-delay-2 mb-6">
  <%~ include('../_components/flash-message.html') %>
</div>

<div class="fade-in animation-delay-3 max-w-2xl space-y-6">
  <!-- User Info -->
  <div class="rounded-lg border border-neutral-800 bg-neutral-900 p-6">
    <%~ include('../_components/card-header.html', { title: 'User Information' }) %>
    <dl class="grid gap-4 sm:grid-cols-2">
      <div>
        <dt class="text-sm text-neutral-400">ID</dt>
        <dd class="text-white"><%= it.editUser.id %></dd>
      </div>
      <div>
        <dt class="text-sm text-neutral-400">Name</dt>
        <dd class="text-white"><%= it.editUser.name %></dd>
      </div>
      <div>
        <dt class="text-sm text-neutral-400">Email</dt>
        <dd class="text-white"><%= it.editUser.email %></dd>
      </div>
      <div>
        <dt class="text-sm text-neutral-400">Status</dt>
        <dd>
          <% if (it.editUser.verified) { %>
          <span class="rounded-full bg-green-900/50 px-2 py-1 text-xs text-green-400">Verified</span>
          <% } else { %>
          <span class="rounded-full bg-yellow-900/50 px-2 py-1 text-xs text-yellow-400">Unverified</span>
          <% } %>
          <% if (it.editUser.admin) { %>
          <span class="ml-2 rounded-full bg-purple-900/50 px-2 py-1 text-xs text-purple-400">Admin</span>
          <% } %>
        </dd>
      </div>
      <div>
        <dt class="text-sm text-neutral-400">Created</dt>
        <dd class="text-white"><%= new Date(it.editUser.created_at).toLocaleString() %></dd>
      </div>
      <div>
        <dt class="text-sm text-neutral-400">Updated</dt>
        <dd class="text-white"><%= new Date(it.editUser.updated_at).toLocaleString() %></dd>
      </div>
    </dl>
  </div>

  <!-- API Call Count -->
  <div class="rounded-lg border border-neutral-800 bg-neutral-900 p-6">
    <%~ include('../_components/card-header.html', { title: 'API Call Count', description: 'Current usage: ' + it.editUser.api_call_count + ' / ' + it.editUser.api_call_limit }) %>
    <form action="/admin/users/<%= it.editUser.id %>/api-count" method="post" class="flex items-end gap-2">
      <%~ include('../_components/inputs/number.html', { name: 'api_call_count', value: it.editUser.api_call_count, min: 0, required: true, class: 'flex-1 rounded-md bg-neutral-800 px-3 py-2 text-neutral-100 placeholder-neutral-500 outline-none focus:ring-2 focus:ring-neutral-600' }) %>
      <%~ include('../_components/button.html', { text: 'Update Count' }) %>
    </form>
  </div>

  <!-- API Call Limit -->
  <div class="rounded-lg border border-neutral-800 bg-neutral-900 p-6">
    <%~ include('../_components/card-header.html', { title: 'API Call Limit', description: 'Monthly limit for this user.' }) %>
    <form action="/admin/users/<%= it.editUser.id %>/api-limit" method="post" class="flex items-end gap-2">
      <%~ include('../_components/inputs/number.html', { name: 'api_call_limit', value: it.editUser.api_call_limit, min: 0, required: true, class: 'flex-1 rounded-md bg-neutral-800 px-3 py-2 text-neutral-100 placeholder-neutral-500 outline-none focus:ring-2 focus:ring-neutral-600' }) %>
      <%~ include('../_components/button.html', { text: 'Update Limit' }) %>
    </form>
  </div>

  <!-- Resend Verification -->
  <% if (!it.editUser.verified) { %>
  <div class="rounded-lg border border-neutral-800 bg-neutral-900 p-6">
    <%~ include('../_components/card-header.html', { title: 'Verification Email', description: 'This user has not verified their email address.' }) %>
    <form action="/admin/users/<%= it.editUser.id %>/resend-verification" method="post">
      <%~ include('../_components/button.html', { text: 'Resend Verification Email', variant: 'warning' }) %>
    </form>
  </div>
  <% } %>
</div>
