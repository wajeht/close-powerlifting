<details id="<%= it.id %>" class="actions-dropdown group relative inline-block">
  <summary class="cursor-pointer list-none rounded p-1 text-neutral-400 outline-none hover:bg-neutral-800 hover:text-white group-open:bg-neutral-800 group-open:text-white [&::-webkit-details-marker]:hidden">
    <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
    </svg>
  </summary>
  <div class="absolute right-0 z-10 mt-1 w-44 rounded-lg border border-neutral-800 bg-neutral-900 p-1 shadow-lg">
    <% for (const item of it.items) { %>
    <% if (item.disabled) { %>
    <span class="block cursor-not-allowed rounded px-3 py-2 text-left text-sm text-neutral-500"><%= item.label %></span>
    <% } else { %>
    <button type="button" class="open-modal block w-full rounded bg-transparent px-3 py-2 text-left text-sm outline-none <%= item.variant === 'danger' ? 'text-red-400 hover:bg-neutral-800 hover:text-red-300' : 'text-neutral-300 hover:bg-neutral-800 hover:text-white' %>" data-modal="<%= item.modal %>"><%= item.label %></button>
    <% } %>
    <% } %>
  </div>
</details>
<script>
(function() {
  if (window._actionsDropdownInit) return;
  window._actionsDropdownInit = true;
  document.addEventListener('click', function(e) {
    var dropdowns = document.querySelectorAll('.actions-dropdown');
    var clickedDropdown = e.target.closest('.actions-dropdown');
    dropdowns.forEach(function(d) {
      if (d !== clickedDropdown) d.removeAttribute('open');
    });
  });
})();
</script>
