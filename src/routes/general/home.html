<!-- hero section -->
<section class="relative">
  <div class="mx-auto max-w-5xl px-4 text-center">
    <!-- background image with overlay -->
    <div class="pointer-events-none absolute -top-40 left-1/2 -z-10 h-[900px] w-full max-w-8xl -translate-x-1/2 opacity-10">
      <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black"></div>
      <img
        src="/img/sumo-deadlift.webp"
        alt=""
        class="h-full w-full object-cover object-top [mask-image:radial-gradient(ellipse_at_center,black_45%,transparent_80%)]"
      />
    </div>

    <p class="fade-in-heading mb-4 text-sm font-medium uppercase tracking-wider text-power">
      Powerlifting Data API
    </p>
    <h1 class="fade-in-heading animation-delay-1 text-4xl font-extrabold tracking-tight text-white sm:text-5xl lg:text-6xl">
      Build powerlifting apps<br class="hidden sm:inline" />
      <span class="text-neutral-400">in minutes, not months</span>
    </h1>
    <p class="fade-in-heading animation-delay-2 mx-auto mt-6 max-w-2xl text-lg text-neutral-400">
      Query 3 million competition results with a single API call.
      No scraping. No parsing. Just clean, structured data.
    </p>
    <div class="fade-in-heading animation-delay-3 mt-10 flex flex-col items-center justify-center gap-4 sm:flex-row">
      <a
        class="rounded-md bg-power px-6 py-3 font-medium text-white shadow-lg shadow-power-glow transition-all hover:bg-power-dark hover:shadow-xl hover:shadow-power-glow"
        href="/register"
      >Get your free API key</a>
      <a
        class="rounded-md border border-neutral-700 px-6 py-3 text-neutral-300 transition-all hover:border-power hover:text-white"
        href="/docs/api"
        target="_blank"
      >Read the docs</a>
    </div>
    <p class="fade-in-heading animation-delay-3 mt-4 text-sm text-neutral-500">
      Free tier includes 500 API calls/month. No credit card required.
    </p>
  </div>
</section>

<!-- stats section -->
<section class="mt-24">
  <div class="fade-in animation-delay-4 mx-auto max-w-5xl px-4">
    <h2 class="mb-3 text-center text-2xl font-bold text-white">
      Tired of scraping OpenPowerlifting?
    </h2>
    <p class="mb-8 text-center text-neutral-500">
      We did the hard work so you don't have to.
    </p>
    <div class="grid gap-4 text-center sm:grid-cols-3" id="stats-grid">
      <div class="rounded-lg border border-neutral-800 bg-neutral-900 p-6 transition-all hover:border-power/50">
        <div class="text-3xl font-bold text-power">
          <span class="counter" data-target="3.3" data-start="1.0" data-decimals="1" data-suffix="M+">0</span>
        </div>
        <div class="mt-1 text-neutral-400">Competition results</div>
        <div class="mt-2 text-xs text-neutral-600">Every squat, bench, deadlift recorded</div>
      </div>
      <div class="rounded-lg border border-neutral-800 bg-neutral-900 p-6 transition-all hover:border-power/50">
        <div class="text-3xl font-bold text-power">
          <span class="counter" data-target="500" data-suffix="K+">0</span>
        </div>
        <div class="mt-1 text-neutral-400">Unique athletes</div>
        <div class="mt-2 text-xs text-neutral-600">From local meets to world championships</div>
      </div>
      <div class="rounded-lg border border-neutral-800 bg-neutral-900 p-6 transition-all hover:border-power/50">
        <div class="text-3xl font-bold text-power">
          <span class="counter" data-target="100" data-suffix="+">0</span>
        </div>
        <div class="mt-1 text-neutral-400">Countries represented</div>
        <div class="mt-2 text-xs text-neutral-600">USAPL, USPA, IPF, WRPF, and more</div>
      </div>
    </div>
  </div>
</section>

<!-- endpoints section -->
<section class="mt-24">
  <div class="fade-in animation-delay-5 mx-auto max-w-5xl px-4">
    <h2 class="mb-3 text-center text-2xl font-bold text-white">
      Six endpoints. Unlimited possibilities.
    </h2>
    <p class="mb-10 text-center text-neutral-500">
      Simple, RESTful API designed for developers
    </p>
    <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
      <div class="group rounded-xl border border-neutral-800 bg-black p-6 transition-all hover:border-power/50">
        <h3 class="mb-1 font-mono text-lg font-semibold text-power">/rankings</h3>
        <p class="mb-3 text-white">Query the all-time leaderboard</p>
        <p class="text-neutral-500">
          Filter by federation, weight class, equipment, sex, year. Sort by total, squat, bench, or deadlift.
        </p>
      </div>
      <div class="group rounded-xl border border-neutral-800 bg-black p-6 transition-all hover:border-power/50">
        <h3 class="mb-1 font-mono text-lg font-semibold text-power">/records</h3>
        <p class="mb-3 text-white">Get world and federation records</p>
        <p class="text-neutral-500">
          Raw, wraps, single-ply, multi-ply. By weight class and sex. Always up-to-date.
        </p>
      </div>
      <div class="group rounded-xl border border-neutral-800 bg-black p-6 transition-all hover:border-power/50">
        <h3 class="mb-1 font-mono text-lg font-semibold text-power">/meets</h3>
        <p class="mb-3 text-white">Search competitions worldwide</p>
        <p class="text-neutral-500">
          Find meets by federation, country, or date range. Returns full results for every competitor.
        </p>
      </div>
      <div class="group rounded-xl border border-neutral-800 bg-black p-6 transition-all hover:border-power/50">
        <h3 class="mb-1 font-mono text-lg font-semibold text-power">/users/{'{'}name{'}'}</h3>
        <p class="mb-3 text-white">Get complete athlete profiles</p>
        <p class="text-neutral-500">
          Full competition history, personal records, progression over time. Everything about any lifter.
        </p>
      </div>
      <div class="group rounded-xl border border-neutral-800 bg-black p-6 transition-all hover:border-power/50">
        <h3 class="mb-1 font-mono text-lg font-semibold text-power">/federations</h3>
        <p class="mb-3 text-white">Browse all federations</p>
        <p class="text-neutral-500">
          List meets by federation. USAPL, USPA, IPF, WRPF, and 100+ more organizations worldwide.
        </p>
      </div>
      <div class="group rounded-xl border border-neutral-800 bg-black p-6 transition-all hover:border-power/50">
        <h3 class="mb-1 font-mono text-lg font-semibold text-power">/status</h3>
        <p class="mb-3 text-white">Check data source status</p>
        <p class="text-neutral-500">
          Server version, total meets tracked, and federation import status. Monitor data freshness.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- sample rankings section -->
<section class="mt-24">
  <div class="fade-in animation-delay-6 mx-auto max-w-5xl px-4">
    <h2 class="mb-2 text-center text-2xl font-bold text-white">See it in action</h2>
    <p class="mb-6 text-center text-neutral-500">Live data from the /rankings endpoint</p>
    <%~ include('../_components/rankings-table.html', rankings) %>
  </div>
</section>

<!-- final cta section -->
<section class="mt-24">
  <div class="fade-in animation-delay-7 mx-auto max-w-5xl px-4">
    <div class="overflow-hidden rounded-2xl border border-neutral-800 bg-black px-4 py-16 text-center transition-all hover:border-power/50">
      <h2 class="mb-4 text-2xl font-bold text-white">
        Ready to build something great?
      </h2>
      <p class="mb-8 text-neutral-400">
        Get started in under a minute. No credit card required.
      </p>
      <a
        class="inline-block rounded-md bg-power px-8 py-4 text-lg font-medium text-white shadow-lg shadow-power-glow transition-all hover:bg-power-dark hover:shadow-xl hover:shadow-power-glow"
        href="/register"
      >Get your free API key</a>
      <p class="mt-6 text-sm text-neutral-500">
        Data sourced from
        <a class="text-power/80 hover:text-power" href="https://openpowerlifting.org" target="_blank">OpenPowerlifting.org</a>
      </p>
    </div>
  </div>
</section>

<script>
  (function() {
    const counters = document.querySelectorAll('.counter');
    let animated = false;

    function animateCounter(counter) {
      const target = parseFloat(counter.dataset.target);
      const start = parseFloat(counter.dataset.start) || 0;
      const decimals = parseInt(counter.dataset.decimals) || 0;
      const suffix = counter.dataset.suffix || '';
      const duration = 2000;
      const steps = 60;
      const stepDuration = duration / steps;
      let current = start;
      const increment = (target - start) / steps;

      function updateCounter() {
        current += increment;
        if (current >= target) {
          counter.textContent = (decimals > 0 ? target.toFixed(decimals) : target) + suffix;
        } else {
          const display = decimals > 0 ? current.toFixed(decimals) : Math.floor(current);
          counter.textContent = display + suffix;
          requestAnimationFrame(() => setTimeout(updateCounter, stepDuration));
        }
      }

      updateCounter();
    }

    function handleIntersection(entries) {
      entries.forEach(entry => {
        if (entry.isIntersecting && !animated) {
          animated = true;
          counters.forEach((counter, index) => {
            setTimeout(() => animateCounter(counter), index * 150);
          });
        }
      });
    }

    const observer = new IntersectionObserver(handleIntersection, {
      threshold: 0.5
    });

    const statsGrid = document.getElementById('stats-grid');
    if (statsGrid) {
      observer.observe(statsGrid);
    }
  })();
</script>
